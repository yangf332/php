PHP - 服务器优化
==================

### 扩展多台服务器
  - 使用Round-Robin DNS
    - 优点：配置简单
    - 缺点：无法检测某服务器故障；DNS同步较慢
  - 负载均衡器：集群中运行的分布请求的设备，有基于硬件，也有基于软件的
    - linux虚拟服务器
    - 一个单独负载均衡服务器
    - 物理设备，通常提供如缓存、SSL终端以及I/O优化
  - 直接服务器返回（DSR：direct server return）
    - 绕开负载均衡，从Web服务器将响应直接写入用户浏览器，属于网络级操作
  - 服务器成员之间共享会话
    - Memcache：使用一个共享的Memcache实例存储会话数据
    - 共享目录中的文件：设置会话状态存储为files，通过NFS共享session.save_path
    - 数据库：存在数据库中

### 分布式架构的陷阱
  - 缓存一致性问题
  - 缓存版本问题
  - 用户IP地址跟踪
  - 级联失败效应
    - 设计时，必须容忍一个或多个服务器故障，具体情况取决于集群大小。
    - 当一个或多个服务器故障，剩余服务器无法处理转移的负载，会出现级联失败效应
  - 部署失败：需要有单独检查每个服务器的步骤

### 监视程序
  - 监视系统
    - Ganglia
    - Cacti
    - Nagios